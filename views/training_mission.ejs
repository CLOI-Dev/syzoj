<% this.title = mission.name + ' - 训练' %>
<% include header %>
<div class="padding">
  <div class="ui grid">
    <div class="row">
      <div class="column">
        <% if(mission.name!="入门题库") { %>
        <div class="ui breadcrumb">
          <a href="/" class="section">首页</a>
          <i class="right chevron icon divider"></i>
          <a href="<%= syzoj.utils.makeUrl(['training']) %>" class="section">训练</a>
          <i class="right chevron icon divider"></i>
          <div class="section"> <%= mission.name %> </div>
        </div>
        <% } %>
        <div class="ui items" style="margin-top: 10px">
          <div class="item">
            <div class="content" style="margin-top:20px">
              <a class="header"><%= mission.name %></a>
              <div class="description">
                <p><%= mission.description %></p>
              </div>
              <% if (allowedManageProblem) { %>
                <a style="margin-top:10px" href="<%= syzoj.utils.makeUrl(['training', 'mission', mission.id, 'edit']) %>" class="ui labeled icon mini green button"><i class="pencil icon"></i> 编辑分类</a>
                <a style="margin-top:10px" href="<%= syzoj.utils.makeUrl(['training', 'mission', mission.id, 'edit_sort']) %>" class="ui labeled icon mini green button"><i class="pencil icon"></i> 编辑顺序</a>
                <a style="margin-top:10px" href="<%= syzoj.utils.makeUrl(['homework', 'mission', mission.id]) %>" class="ui labeled icon mini green button"><i class="pencil icon"></i> 查看学生完成情况(实验功能)</a>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="column">
        <table class="ui very basic center aligned table">
          <thead>
            <tr>
              <th class="one wide" style="text-align: center">提交状态</th>
              <th class="one wide">编号</th>
              <th class="left aligned">题目</th>
              <th class="one wide">通过数</th>
              <th class="one wide">提交数</th>
              <th class="one wide">通过率</th>
            </tr>
          </thead>
          <tbody>
            <% for (let problem of problems) { %>
            <tr style="height: 44px; ">
                <td>
                <% if (problem.judge_state) { %>
                  <a href="<%= syzoj.utils.makeUrl(['submission', problem.judge_state.id]) %>">
                    <span class="status <%= problem.judge_state.status.toLowerCase().split(' ').join('_') %>">
                      <i class="<%= icon[problem.judge_state.status] || 'remove' %> icon"></i>
                    </span>
                  </a>
                <% } %>
                </td>
                <td>
                  <%= problem.id %>
                </td>
                <td class="left aligned">
                  <a href="<%= syzoj.utils.makeUrl(['problem', problem.id]) %>" target="_blank"><%= syzoj.utils.removeTitleTag(problem.title) %></a>
                  <div class="show_tag_controled" style="float: right; ">
                      <%
                      if (problem.tags) {
                        for (let tag of problem.tags) {
                          %>
                        <span class="ui header">
                          <a href="<%=syzoj.utils.makeUrl(['problems', 'tag', tag.id])%>" class="ui tiny <%= tag.color %> label">
                            <%= tag.name %>
                          </a>
                        </span>
                        <%
                        }
                      }
                      %>
                    </div>
                </td>
                <td><%= problem.ac_num %></td>
                <td><%= problem.submit_num %></td>
                <td><%= problem.submit_num != 0 ? (((problem.ac_num / problem.submit_num * 100) || 0).toFixed(2) + '%') : '-' %></td>
            </tr>
            <% } %>
          </tbody>
        </table>  
      </div>
    </div>
  </div>
</div>
<% include footer %>
